(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,n){e.exports=n(61)},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(19),c=n.n(s),h=(n(37),n(5)),l=n(6),r=n(14),o=n(12),u=n(7),f=n(13),d=(n(38),n(39),function(){function e(t){Object(h.a)(this,e),this.reset(t)}return Object(l.a)(e,[{key:"reset",value:function(e){this.fnEtaSpec=e.etaspec,this.fnUSpec=e.uspec,this.h=e.h,this.dt=e.dt,this.dx=e.dx,this.fCoeff=e.fCoeff,this.nx=e.ncells,this.t=0,this.stepcount=0,this.nxp1=this.nx+1,this.nxm1=this.nx-1,this.x=new Array(this.nxp1),this.xcentre=new Array(this.nx),this.u=new Array(this.nxp1),this.newu=new Array(this.nxp1),this.eta=new Array(this.nxp1),this.neweta=new Array(this.nxp1),this.flags=new Array(this.nxp1);for(var t=0;t<this.nxp1;++t)this.u[t]=0,this.newu[t]=0,this.eta[t]=0,this.neweta[t]=0,this.flags[t]=!1;for(this.x[0]=e.offset,t=1;t<this.nxp1;++t)this.x[t]=this.x[t-1]+this.dx;for(t=0;t<this.nx;++t)this.xcentre[t]=(this.x[t+1]+this.x[t])/2;this.flags[0]=!0,this.flags[this.nxm1]=!0}},{key:"step",value:function(){for(var e=1;e<this.nx;++e){var t=-9.81*(this.eta[e]-this.eta[e-1])/this.dx;t-=this.u[e]*this.fCoeff,this.newu[e]=this.u[e]+this.dt*t}for(this.uboundary(),e=0;e<this.nxp1;++e)this.u[e]=this.newu[e];for(e=0;e<this.nx;++e){var n=-this.h*(this.u[e+1]-this.u[e])/this.dx;this.neweta[e]=this.eta[e]+this.dt*n}for(this.etaboundary(),e=0;e<this.nx;++e)this.eta[e]=this.neweta[e];this.uspec(),this.etaspec(),++this.stepcount,this.t+=this.dt}},{key:"uboundary",value:function(){this.newu[0]=this.newu[1],this.newu[this.nx]=0}},{key:"etaboundary",value:function(){}},{key:"uspec",value:function(){}},{key:"etaspec",value:function(){for(var e=0;e<this.nx;++e)if(this.flags[e]){var t=this.fnEtaSpec(this,this.stepcount,e);void 0!==t&&(this.eta[e]=t)}}}]),e}()),p=function(){function e(t){Object(h.a)(this,e),this.canvas=t,this.ctx=this.canvas.getContext("2d")}return Object(l.a)(e,[{key:"width",value:function(){return this.canvas.width}},{key:"height",value:function(){return this.canvas.height}},{key:"fillStyle",value:function(e,t,n){this.ctx.fillStyle="rgb("+Math.min(Math.max(e,0),255)+", "+Math.min(Math.max(t,0),255)+", "+Math.min(Math.max(n,0),255)+")"}},{key:"circle",value:function(e,t,n){this.ctx.beginPath(),this.ctx.arc(e,t,n,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()}},{key:"rect",value:function(e,t,n,a){this.ctx.beginPath(),this.ctx.rect(e,t,n,a),this.ctx.closePath(),this.ctx.fill()}},{key:"poly",value:function(e,t){if(!(e.length!==t.length||e.length<2)){this.ctx.beginPath(),this.ctx.moveTo(e[0],t[0]);for(var n=1;n<e.length;++n)this.ctx.lineTo(e[n],t[n]);this.ctx.closePath(),this.ctx.fill()}}},{key:"clear",value:function(){this.ctx.clearRect(0,0,this.width(),this.height())}}]),e}(),g=224,v=238,m=255,y=88,x=160,b=88,k=function(){function e(t,n){Object(h.a)(this,e),this.pane=new p(t),this.m1d=new d(n),this.left=0,this.right=this.m1d.x[this.m1d.nxm1]}return Object(l.a)(e,[{key:"reset",value:function(e){this.m1d.reset(e),this.left=0,this.right=this.m1d.x[this.m1d.nxm1],this.pane.clear()}},{key:"step",value:function(){var e=this.pane.width(),t=this.pane.height();this.pane.clear(),this.pane.fillStyle(g,v,m),this.pane.rect(0,0,e,t);for(var n=0;n<10;++n)this.pane.fillStyle(y-15*n,x-15*n,b-5*n),this.drawEta(20*n,0,this.m1d.nxm1,e,t);for(n=0;n<2;++n)this.m1d.step()}},{key:"drawEta",value:function(e,t,n,a,i){var s=n-t+1,c=new Array(s+2),h=new Array(s+2),l=this.m1d.x,r=this.m1d.eta;c[0]=this.x_to_xf((l[t]+l[t+1])/2,a),h[0]=this.y_to_yf(r[t],i)+e;for(var o=t+1;o<=n;++o)c[o-t]=this.x_to_xf((l[o]+l[o+1])/2,a),h[o-t]=this.y_to_yf(r[o],i)+e;c[n+1]=c[n],h[n+1]=i-1+e,c[n+2]=c[t],h[n+2]=i-1+e,this.pane.poly(c,h,!1)}},{key:"x_to_xf",value:function(e,t){return t*(e-this.left)/(this.right-this.left)}},{key:"y_to_yf",value:function(e,t){return t-t*(e- -2)/4}}]),e}(),w=function(e,t,n){return t<200?.5*(1+Math.cos(2*Math.PI*t/100+Math.PI)):void 0},S=function(e,t,n){if(t<200){return t>=50?(100-t)/50:t/50}},C=function(e,t,n){return t<200?1:void 0},E=function(e,t,n){return t<200?0===n?.5*(1+Math.cos(1*Math.PI*t/100+Math.PI)):.75*(1+Math.cos(2*Math.PI*t/100+Math.PI)):void 0},O=function(e,t,n){},j=function(){function e(){Object(h.a)(this,e),this.ncells=150,this.offset=0,this.dx=100,this.h=150,this.dt=1,this.fCoeff=0,this.lambdaLength=100,this.etaspec=E,this.uspec=O}return Object(l.a)(e,[{key:"specLabels",value:function(){return["Cosine","Triangle","Square","Multi"]}},{key:"setSpecification",value:function(e){switch(e){case 0:this.etaspec=w,this.uspec=O;break;case 1:this.etaspec=S,this.uspec=O;break;case 2:this.etaspec=C,this.uspec=O;break;default:this.etaspec=E,this.uspec=O}}}]),e}(),M=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).intervalId=null,n.config=new j,n.updateConfig(n.config,e),n.changeWaveStateClick=n.changeWaveStateClick.bind(Object(u.a)(n)),n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=document.getElementById("wave");e.width=e.parentNode.clientWidth,e.height=e.parentNode.clientHeight,this.wave=new k(e,this.config),this.startWave(25)}},{key:"shouldComponentUpdate",value:function(e){return this.suspendWave(),this.updateConfig(this.config,e),this.restartWave(25),!0}},{key:"setCanvasSize",value:function(e,t){document.getElementById("wave").width=e,document.getElementById("wave").height=t}},{key:"restartWave",value:function(e){this.suspendWave(),this.wave.reset(this.config),this.intervalId=setInterval(this.drawWave,Math.min(Math.max(1,e),5e3),this)}},{key:"startWave",value:function(e){this.suspendWave(),this.intervalId=setInterval(this.drawWave,Math.min(Math.max(1,e),5e3),this)}},{key:"suspendWave",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)}},{key:"resumeWave",value:function(){return this.startWave(25)}},{key:"changeWaveRefresh",value:function(e){this.suspendWave(),this.resumeWave(e)}},{key:"setComputationsPerDraw",value:function(e){this.stepsPerDraw=Math.min(Math.max(1,e),10)}},{key:"drawWave",value:function(e){e.wave.step()}},{key:"changeWaveStateClick",value:function(){null!==this.intervalId?this.suspendWave():this.resumeWave()}},{key:"render",value:function(){return i.a.createElement("div",{className:"m1d"},i.a.createElement("canvas",{id:"wave",onClick:this.changeWaveStateClick},"Channel Model Display Pane"))}},{key:"updateConfig",value:function(e,t){e.ncells=t.ncells,e.dx=t.length/e.ncells,e.dt=.01*e.dx,e.fCoeff=t.fcoeff,e.setSpecification(t.forcingSpec)}}]),t}(i.a.Component),W=n(67),I=n(62),F=n(68),A=n(17),P=n.n(A),T=n(43),_={border:0,WebkitAppearance:"none",MozAppearance:"none",appearance:"none",textAlign:"center",cursor:"col-resize",color:"blue",borderBottom:"1px dashed blue",display:"inline",fontFamily:"inherit",fontSize:"inherit",padding:"none",width:40},z={border:0,WebkitAppearance:"none",MozAppearance:"none",appearance:"none",textAlign:"center",cursor:"col-resize",color:"blue",borderBottom:"1px dashed blue",display:"inline",fontFamily:"inherit",fontSize:"inherit",padding:"none",width:80},B=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).changeNumberOfCells=n.changeNumberOfCells.bind(Object(u.a)(n)),n.changeFrictionCoeff=n.changeFrictionCoeff.bind(Object(u.a)(n)),n.changeForcing=n.changeForcing.bind(Object(u.a)(n)),n.forcingStyle=n.forcingStyle.bind(Object(u.a)(n)),n.state={length:e.length,ncells:e.ncells,dx:e.length/e.ncells,dt:1,fcoeff:e.fcoeff,forcingSpec:e.forcingSpec},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"changeNumberOfCells",value:function(e){var t=this;this.setState({ncells:e,dx:this.state.length/e,dt:.01*this.state.length/e},function(){t.props.onChange(t.state)})}},{key:"changeFrictionCoeff",value:function(e){var t=this;this.setState({fcoeff:e},function(){t.props.onChange(t.state)})}},{key:"changeForcing",value:function(e){var t=this;console.log(this.toForcingSpec(e.target.id)),this.setState({forcingSpec:this.toForcingSpec(e.target.id)},function(){t.props.onChange(t.state)})}},{key:"render",value:function(){return i.a.createElement(W.a,null,i.a.createElement(W.a.Body,null,i.a.createElement(W.a.Title,null,"Channel Wave"),i.a.createElement(W.a.Text,null,"A 1-dimensional depth-averaged hydrodynamic model representation of a channel ",i.a.createElement("b",null,i.a.createElement(P.a,{value:this.state.length,displayType:"text",thousandSeparator:!0}),"m")," long, divided into\xa0",i.a.createElement(T,{value:this.state.ncells,pixelDistance:10,style:_,onChange:this.changeNumberOfCells,min:20,max:500,step:10}),"cells. Each cell is ",i.a.createElement("b",null,i.a.createElement(P.a,{value:this.state.dx,displayType:"text",decimalScale:0,thousandSeparator:!0}),"m")," long and the model is forward time-stepped at ",i.a.createElement("b",null,i.a.createElement(P.a,{value:this.state.dt,displayType:"text",decimalScale:2,thousandSeparator:!0}),"s"),"."),i.a.createElement(W.a.Text,null,"A friction coefficient of ",i.a.createElement(T,{value:this.state.fcoeff,pixelDistance:2,style:z,onChange:this.changeFrictionCoeff,format:function(e){return e.toFixed(5)},min:0,max:.01,step:1e-5}),"is being applied."),i.a.createElement("div",null,"The boundary forcing method is\xa0",i.a.createElement(I.a,{"aria-label":"Boundary forcing",size:"sm"},i.a.createElement(F.a,{id:"bc-0",variant:this.forcingStyle(0),onClick:this.changeForcing},"Cosine"),i.a.createElement(F.a,{id:"bc-1",variant:this.forcingStyle(1),onClick:this.changeForcing},"Triangle"),i.a.createElement(F.a,{id:"bc-2",variant:this.forcingStyle(2),onClick:this.changeForcing},"Square"),i.a.createElement(F.a,{id:"bc-3",variant:this.forcingStyle(3),onClick:this.changeForcing},"Phased")))))}},{key:"forcingStyle",value:function(e){return e===this.state.forcingSpec?"primary":"secondary"}},{key:"toForcingSpec",value:function(e){switch(e){case"bc-0":return 0;case"bc-1":return 1;case"bc-2":return 2;default:return 3}}}]),t}(i.a.Component),N=n(66),D=n(63),q=n(64),H=n(65),J=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(r.a)(this,Object(o.a)(t).call(this,e))).settingsChanged=n.settingsChanged.bind(Object(u.a)(n)),n.state={length:1e4,ncells:100,fcoeff:0,forcingSpec:3},n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"settingsChanged",value:function(e){this.setState(e)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(N.a,{bg:"dark",variant:"dark",expand:"lg"},i.a.createElement(N.a.Brand,null,i.a.createElement("img",{src:"sws.png",height:"30",className:"d-inline-block align-top"})),i.a.createElement(N.a.Text,null,"1D Hydrodynamic Model")),i.a.createElement(D.a,null,i.a.createElement(q.a,null,i.a.createElement(H.a,null,i.a.createElement(B,{length:this.state.length,ncells:this.state.ncells,fcoeff:this.state.fcoeff,forcingSpec:this.state.forcingSpec,onChange:this.settingsChanged}))),i.a.createElement(q.a,null,i.a.createElement(H.a,null,i.a.createElement(M,{length:this.state.length,ncells:this.state.ncells,fcoeff:this.state.fcoeff,forcingSpec:this.state.forcingSpec}))),i.a.createElement(q.a,null,i.a.createElement(H.a,null,i.a.createElement("p",{style:{fontSize:"smaller"}},"Click on the wave to suspend and resume")))),i.a.createElement("div",{className:"fixed-bottom"},i.a.createElement(N.a,{bg:"dark",variant:"dark",expand:"lg"},i.a.createElement(N.a.Text,null,"Copyright (C) 2019, SoftWaring Solutions ATF The Miss Trust"))))}}]),t}(i.a.Component);c.a.render(i.a.createElement(J,null),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.507799b1.chunk.js.map